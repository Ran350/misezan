# @ran350/misezan

さや香の M-1 2023 決勝ネタ「見せ算」に対応した五則演算器

## 見せ算のルール

> 【計算のルール】
> M-1 2023 で披露されたルールに対応しています。 見る数と見られる数は入れ替えても同じ答えとしています。
>
> 〈基本のルール〉
>
> 1 見せ 1 = 0
>
> 同じ数字を見せると 0 になる。
> （自分と同じ格好の人を見ると気まずくなりその場を離れるため。）
>
> 1 見せ 2 = 2
>
> 小さい数字に大きい数字を見せると大きい数字が残る。
> （大きい人を見るとこわくて逃げたくなるため。）
>
> 〈似た形状の数字の組についての応用ルール〉
>
> 6 見せ 9 = 11
>
> （お互いが生き別れの兄弟と勘違いして近づいてしまうため。）
>
> 2 見せ 5 = 1.1
>
> （お互いが生き別れの兄弟と勘違いして近寄るがよく見ると全然違うことに気付きびっくりして携帯「.」を落としてしまうため。）
>
> [EnigmaGAMEIN](https://gamein.enigmahouse.jp/g/sprint-answer/misezan)

### 演算の優先順位

M-1 2023 決勝ネタで演算の優先順位は未定義であったため、
本実装では、見せ算演算は乗除算と同じ優先順位としている。

## 使い方

```ts
import { evaluate } from "misezan-evaluator";

evaluate("1見せ1"); // 0
evaluate("1見せ2"); // 2
evaluate("6見せ9"); // 11
evaluate("2見せ5"); // 1.1
evaluate("1見せ100"); // 83
```

- 小数の演算にも対応する
- 12(3+4) のような，(横に*が省略された記法にも対応する
- 答えが小数になる計算では小数第 9 位までを答えとする
- これらの演算子と数字以外の文字列 (スペースなど) は入力されないものとする

## 拡張バッカス・ナウア記法による定義

見せ算演算子を `👁️` とすると、五則演算の構文は以下のような定義になる。

```
TERM
    = NUMBER
    = ('+' | '-') TERM
    = '(' EXP ')'

FACTOR
    = TERM
    = FACTOR ('*' | '/' | '👁️') TERM

EXP
    = FACTOR
    = EXP ('+' | '-') FACTOR
```
